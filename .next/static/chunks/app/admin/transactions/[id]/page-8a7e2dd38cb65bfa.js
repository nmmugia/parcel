(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1728],{554:(e,s,a)=>{Promise.resolve().then(a.bind(a,27641)),Promise.resolve().then(a.bind(a,24146)),Promise.resolve().then(a.bind(a,73344))},73344:(e,s,a)=>{"use strict";a.d(s,{AdminTransactionDetail:()=>A});var t=a(95155),n=a(12115),r=a(76046),i=a(14085),l=a(35007),d=a(39286),c=a(8102),o=a(25858),m=a(89134),x=a(29602),u=a(98662),h=a(87364),f=a(75340),j=a(73239),p=a(16233),N=a(48173),v=a.n(N),g=a(66889),y=a(98867),b=a(40767),w=a(92598);function k(e){let{payments:s}=e,a=e=>{switch(e){case"WAITING_FOR_PAYMENT":return(0,t.jsxs)(d.E,{variant:"outline",className:"flex items-center gap-1",children:[(0,t.jsx)(g.A,{className:"h-3 w-3"}),"Menunggu Pembayaran"]});case"WAITING_FOR_APPROVAL":return(0,t.jsxs)(d.E,{variant:"outline",className:"flex items-center gap-1",children:[(0,t.jsx)(g.A,{className:"h-3 w-3"}),"Menunggu Persetujuan"]});case"APPROVED":return(0,t.jsxs)(d.E,{variant:"success",className:"flex items-center gap-1",children:[(0,t.jsx)(y.A,{className:"h-3 w-3"}),"Disetujui"]});case"REJECTED":return(0,t.jsxs)(d.E,{variant:"destructive",className:"flex items-center gap-1",children:[(0,t.jsx)(b.A,{className:"h-3 w-3"}),"Ditolak"]});default:return(0,t.jsx)(d.E,{variant:"outline",children:e})}};return 0===s.length?(0,t.jsx)("p",{className:"text-center text-muted-foreground",children:"Tidak ada data pembayaran"}):(0,t.jsx)("div",{className:"space-y-4",children:s.map(e=>(0,t.jsxs)("div",{className:"flex flex-col gap-2 rounded-lg border p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"font-medium",children:["Cicilan ",(0,x.Yq)(e.dueDate)]}),a(e.status)]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Jumlah:"}),(0,t.jsx)("span",{children:(0,x.vv)(e.amount)})]}),e.paidDate&&(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Tanggal Bayar:"}),(0,t.jsx)("span",{children:(0,x.Yq)(e.paidDate)})]}),e.resellerBonus&&(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Bonus Reseller:"}),(0,t.jsx)("span",{children:(0,x.vv)(e.resellerBonus)})]}),e.adminBonus&&(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Bonus Admin:"}),(0,t.jsx)("span",{children:(0,x.vv)(e.adminBonus)})]}),(0,t.jsx)("div",{className:"mt-2",children:e.proofImageUrl?(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Bukti pembayaran telah diunggah"}),(0,t.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>window.open(e.proofImageUrl,"_blank"),children:[(0,t.jsx)(w.A,{className:"mr-2 h-4 w-4"}),"Lihat Bukti"]})]}):(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Belum ada bukti pembayaran"})}),"WAITING_FOR_APPROVAL"===e.status&&e.proofImageUrl&&(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(v(),{href:"/admin/payments/".concat(e.id),children:(0,t.jsx)(i.$,{size:"sm",className:"w-full",children:"Proses Pembayaran"})})})]},e.id))})}function A(e){let{transaction:s}=e,[a,N]=(0,n.useState)(!1),v=(0,r.useRouter)(),{toast:g}=(0,m.dj)(),y=e=>{switch(e){case"ACTIVE":return(0,t.jsx)(d.E,{variant:"default",children:"Aktif"});case"COMPLETED":return(0,t.jsx)(d.E,{variant:"success",children:"Selesai"});case"CANCELLED":return(0,t.jsx)(d.E,{variant:"destructive",children:"Dibatalkan"});default:return(0,t.jsx)(d.E,{variant:"outline",children:e})}},b=async e=>{N(!0);try{let a=await fetch("/api/transactions/".concat(s.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:e})});if(!a.ok){let e=await a.json();throw Error(e.message||"Terjadi kesalahan saat memperbarui status transaksi")}g({title:"Berhasil",description:"Status transaksi berhasil diubah menjadi ".concat("COMPLETED"===e?"Selesai":"Dibatalkan")}),v.refresh()}catch(e){g({variant:"destructive",title:"Gagal",description:e instanceof Error?e.message:"Terjadi kesalahan saat memperbarui status transaksi"})}finally{N(!1)}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(i.$,{variant:"outline",size:"icon",onClick:()=>v.back(),className:"h-8 w-8",children:(0,t.jsx)(h.A,{className:"h-4 w-4"})}),(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Detail Transaksi"})]}),(0,t.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,t.jsxs)(l.Zp,{children:[(0,t.jsxs)(l.aR,{className:"pb-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(u.c,{icon:s.package.packageType.icon,className:"h-5 w-5"}),(0,t.jsx)(l.ZB,{children:s.package.name})]}),y(s.status)]}),(0,t.jsxs)(l.BT,{className:"mt-2",children:["ID Transaksi: ",s.id]})]}),(0,t.jsx)(l.Wu,{className:"pb-3",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium mb-2",children:"Informasi Paket"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Jenis Paket:"}),(0,t.jsx)("span",{className:"font-medium",children:s.package.packageType.name})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Harga Total:"}),(0,t.jsx)("span",{className:"font-medium",children:(0,x.vv)(s.totalAmount)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Tenor:"}),(0,t.jsxs)("span",{className:"font-medium",children:[s.tenorMonths," bulan"]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Cicilan per Bulan:"}),(0,t.jsx)("span",{className:"font-medium",children:(0,x.vv)(s.monthlyAmount)})]})]})]}),(0,t.jsx)(c.w,{}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium mb-2",children:"Informasi Reseller"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Nama:"}),(0,t.jsx)("span",{className:"font-medium",children:s.reseller.name})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Email:"}),(0,t.jsx)("span",{className:"font-medium",children:s.reseller.email})]})]})]}),(0,t.jsx)(c.w,{}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium mb-2",children:"Informasi Pelanggan"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Nama:"}),(0,t.jsx)("span",{className:"font-medium",children:s.customerName})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Telepon:"}),(0,t.jsx)("span",{className:"font-medium",children:s.customerPhone})]}),s.customerAddress&&(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Alamat:"}),(0,t.jsx)("span",{className:"font-medium text-right",children:s.customerAddress})]})]})]}),(0,t.jsx)(c.w,{}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium mb-2",children:"Informasi Transaksi"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Tanggal Transaksi:"}),(0,t.jsx)("span",{className:"font-medium",children:(0,x.Yq)(s.createdAt)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Status:"}),(0,t.jsx)("span",{className:"font-medium",children:y(s.status)})]})]})]})]})}),(0,t.jsx)(l.wL,{className:"flex justify-end gap-4",children:"ACTIVE"===s.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(o.Lt,{children:[(0,t.jsx)(o.tv,{asChild:!0,children:(0,t.jsxs)(i.$,{variant:"outline",children:[(0,t.jsx)(f.A,{className:"mr-2 h-4 w-4"}),"Batalkan"]})}),(0,t.jsxs)(o.EO,{children:[(0,t.jsxs)(o.wd,{children:[(0,t.jsx)(o.r7,{children:"Batalkan Transaksi"}),(0,t.jsx)(o.$v,{children:"Apakah Anda yakin ingin membatalkan transaksi ini? Tindakan ini tidak dapat dibatalkan."})]}),(0,t.jsxs)(o.ck,{children:[(0,t.jsx)(o.Zr,{children:"Batal"}),(0,t.jsx)(o.Rx,{onClick:()=>b("CANCELLED"),disabled:a,children:a?"Memproses...":"Ya, Batalkan"})]})]})]}),(0,t.jsxs)(o.Lt,{children:[(0,t.jsx)(o.tv,{asChild:!0,children:(0,t.jsxs)(i.$,{children:[(0,t.jsx)(j.A,{className:"mr-2 h-4 w-4"}),"Selesaikan"]})}),(0,t.jsxs)(o.EO,{children:[(0,t.jsxs)(o.wd,{children:[(0,t.jsx)(o.r7,{children:"Selesaikan Transaksi"}),(0,t.jsx)(o.$v,{children:"Apakah Anda yakin ingin menyelesaikan transaksi ini? Tindakan ini tidak dapat dibatalkan."})]}),(0,t.jsxs)(o.ck,{children:[(0,t.jsx)(o.Zr,{children:"Batal"}),(0,t.jsx)(o.Rx,{onClick:()=>b("COMPLETED"),disabled:a,children:a?"Memproses...":"Ya, Selesaikan"})]})]})]})]})})]}),(0,t.jsxs)(l.Zp,{children:[(0,t.jsxs)(l.aR,{children:[(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(p.A,{className:"h-5 w-5"}),"Pembayaran"]}),(0,t.jsx)(l.BT,{children:"Daftar cicilan pembayaran untuk transaksi ini"})]}),(0,t.jsx)(l.Wu,{children:(0,t.jsx)(k,{payments:s.payments})})]})]})]})}},98662:(e,s,a)=>{"use strict";a.d(s,{c:()=>l});var t=a(95155),n=a(44200),r=a(60719),i=a(29602);function l(e){let{icon:s,className:a,...l}=e,d=n[s]||r.A;return(0,t.jsx)(d,{className:(0,i.cn)("h-4 w-4",a),...l})}},25858:(e,s,a)=>{"use strict";a.d(s,{$v:()=>j,EO:()=>x,Lt:()=>d,Rx:()=>p,Zr:()=>N,ck:()=>h,r7:()=>f,tv:()=>c,wd:()=>u});var t=a(95155),n=a(12115),r=a(83572),i=a(29602),l=a(14085);let d=r.bL,c=r.l9,o=r.ZL,m=n.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)(r.hJ,{className:(0,i.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...n,ref:s})});m.displayName=r.hJ.displayName;let x=n.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsxs)(o,{children:[(0,t.jsx)(m,{}),(0,t.jsx)(r.UC,{ref:s,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...n})]})});x.displayName=r.UC.displayName;let u=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-2 text-center sm:text-left",s),...a})};u.displayName="AlertDialogHeader";let h=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a})};h.displayName="AlertDialogFooter";let f=n.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)(r.hE,{ref:s,className:(0,i.cn)("text-lg font-semibold",a),...n})});f.displayName=r.hE.displayName;let j=n.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)(r.VY,{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",a),...n})});j.displayName=r.VY.displayName;let p=n.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)(r.rc,{ref:s,className:(0,i.cn)((0,l.r)(),a),...n})});p.displayName=r.rc.displayName;let N=n.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)(r.ZD,{ref:s,className:(0,i.cn)((0,l.r)({variant:"outline"}),"mt-2 sm:mt-0",a),...n})});N.displayName=r.ZD.displayName},39286:(e,s,a)=>{"use strict";a.d(s,{E:()=>l});var t=a(95155);a(12115);var n=a(31027),r=a(29602);let i=(0,n.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:s,variant:a,...n}=e;return(0,t.jsx)("div",{className:(0,r.cn)(i({variant:a}),s),...n})}},8102:(e,s,a)=>{"use strict";a.d(s,{w:()=>o});var t=a(95155),n=a(12115),r=a(23360),i="horizontal",l=["horizontal","vertical"],d=n.forwardRef((e,s)=>{let{decorative:a,orientation:n=i,...d}=e,c=l.includes(n)?n:i;return(0,t.jsx)(r.sG.div,{"data-orientation":c,...a?{role:"none"}:{"aria-orientation":"vertical"===c?c:void 0,role:"separator"},...d,ref:s})});d.displayName="Separator";var c=a(29602);let o=n.forwardRef((e,s)=>{let{className:a,orientation:n="horizontal",decorative:r=!0,...i}=e;return(0,t.jsx)(d,{ref:s,decorative:r,orientation:n,className:(0,c.cn)("shrink-0 bg-border","horizontal"===n?"h-[1px] w-full":"h-full w-[1px]",a),...i})});o.displayName=d.displayName},89134:(e,s,a)=>{"use strict";a.d(s,{dj:()=>x});var t=a(12115);let n=0,r=new Map,i=e=>{if(r.has(e))return;let s=setTimeout(()=>{r.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);r.set(e,s)},l=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=s;return a?i(a):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},d=[],c={toasts:[]};function o(e){c=l(c,e),d.forEach(e=>{e(c)})}function m(e){let{...s}=e,a=(n=(n+1)%Number.MAX_VALUE).toString(),t=()=>o({type:"DISMISS_TOAST",toastId:a});return o({type:"ADD_TOAST",toast:{...s,id:a,open:!0,onOpenChange:e=>{e||t()}}}),{id:a,dismiss:t,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function x(){let[e,s]=t.useState(c);return t.useEffect(()=>(d.push(s),()=>{let e=d.indexOf(s);e>-1&&d.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}}},e=>{var s=s=>e(e.s=s);e.O(0,[8568,2374,1078,508,2367,3572,5836,8441,1517,7358],()=>s(554)),_N_E=e.O()}]);