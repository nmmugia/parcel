(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7968],{18360:(e,s,a)=>{Promise.resolve().then(a.bind(a,27641)),Promise.resolve().then(a.bind(a,43412)),Promise.resolve().then(a.bind(a,24146))},43412:(e,s,a)=>{"use strict";a.d(s,{AdminPaymentManagement:()=>P});var t=a(95155),r=a(12115),l=a(48173),n=a.n(l),i=a(14085),d=a(35007),c=a(31641),o=a(39286),m=a(9955),u=a(29602),x=a(66889),f=a(98867),h=a(40767),p=a(16233),j=a(20853),g=a(92598),N=a(51124),v=a(10332),y=a(15785),b=a(196);function w(e){let{onFilterChange:s}=e,[a,l]=(0,r.useState)("all"),[n,d]=(0,r.useState)("dueDate"),[c,o]=(0,r.useState)("asc"),[m,u]=(0,r.useState)("none"),x=e=>{o(e),s({status:a,sortBy:n,sortOrder:e,groupBy:m})};return(0,t.jsxs)(N.AM,{children:[(0,t.jsx)(N.Wv,{asChild:!0,children:(0,t.jsxs)(i.$,{variant:"outline",className:"flex items-center gap-2",children:[(0,t.jsx)(b.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Filter"})]})}),(0,t.jsx)(N.hl,{className:"w-80",children:(0,t.jsxs)("div",{className:"grid gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h4",{className:"font-medium",children:"Status"}),(0,t.jsxs)(v.z,{defaultValue:a,onValueChange:e=>{l(e),s({status:e,sortBy:n,sortOrder:c,groupBy:m})},className:"flex flex-col space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(v.C,{value:"all",id:"all"}),(0,t.jsx)(y.J,{htmlFor:"all",children:"Semua"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(v.C,{value:"WAITING_FOR_PAYMENT",id:"waiting-payment"}),(0,t.jsx)(y.J,{htmlFor:"waiting-payment",children:"Menunggu Pembayaran"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(v.C,{value:"WAITING_FOR_APPROVAL",id:"waiting-approval"}),(0,t.jsx)(y.J,{htmlFor:"waiting-approval",children:"Menunggu Persetujuan"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(v.C,{value:"APPROVED",id:"approved"}),(0,t.jsx)(y.J,{htmlFor:"approved",children:"Disetujui"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(v.C,{value:"REJECTED",id:"rejected"}),(0,t.jsx)(y.J,{htmlFor:"rejected",children:"Ditolak"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h4",{className:"font-medium",children:"Urutkan Berdasarkan"}),(0,t.jsxs)(v.z,{defaultValue:n,onValueChange:e=>{d(e),s({status:a,sortBy:e,sortOrder:c,groupBy:m})},className:"flex flex-col space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(v.C,{value:"dueDate",id:"dueDate"}),(0,t.jsx)(y.J,{htmlFor:"dueDate",children:"Tanggal Jatuh Tempo"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(v.C,{value:"paidDate",id:"paidDate"}),(0,t.jsx)(y.J,{htmlFor:"paidDate",children:"Tanggal Bayar"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(v.C,{value:"amount",id:"amount"}),(0,t.jsx)(y.J,{htmlFor:"amount",children:"Jumlah"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(v.C,{value:"reseller",id:"reseller"}),(0,t.jsx)(y.J,{htmlFor:"reseller",children:"Reseller"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h4",{className:"font-medium",children:"Urutan"}),(0,t.jsxs)(v.z,{defaultValue:c,onValueChange:e=>x(e),className:"flex flex-col space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(v.C,{value:"asc",id:"asc"}),(0,t.jsx)(y.J,{htmlFor:"asc",children:"Naik (A-Z, Terlama)"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(v.C,{value:"desc",id:"desc"}),(0,t.jsx)(y.J,{htmlFor:"desc",children:"Turun (Z-A, Terbaru)"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h4",{className:"font-medium",children:"Kelompokkan Berdasarkan"}),(0,t.jsxs)(v.z,{defaultValue:m,onValueChange:e=>{u(e),s({status:a,sortBy:n,sortOrder:c,groupBy:e})},className:"flex flex-col space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(v.C,{value:"none",id:"none"}),(0,t.jsx)(y.J,{htmlFor:"none",children:"Tidak Ada"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(v.C,{value:"month",id:"month"}),(0,t.jsx)(y.J,{htmlFor:"month",children:"Bulan"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(v.C,{value:"status",id:"status-group"}),(0,t.jsx)(y.J,{htmlFor:"status-group",children:"Status"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(v.C,{value:"reseller",id:"reseller-group"}),(0,t.jsx)(y.J,{htmlFor:"reseller-group",children:"Reseller"})]})]})]})]})})]})}var A=a(87949),D=a(40687);function P(e){let{payments:s}=e,[a,l]=(0,r.useState)("WAITING_FOR_APPROVAL"),[N,v]=(0,r.useState)(""),[y,b]=(0,r.useState)({status:"all",sortBy:"dueDate",sortOrder:"asc",groupBy:"none"}),P=(0,r.useMemo)(()=>{let e=s;if("all"!==a&&(e=e.filter(e=>e.status===a)),N){let s=N.toLowerCase();e=e.filter(e=>e.transaction.customerName.toLowerCase().includes(s)||e.transaction.package.name.toLowerCase().includes(s)||e.transaction.reseller.name.toLowerCase().includes(s))}return[...e].sort((e,s)=>"dueDate"===y.sortBy?"asc"===y.sortOrder?new Date(e.dueDate).getTime()-new Date(s.dueDate).getTime():new Date(s.dueDate).getTime()-new Date(e.dueDate).getTime():"paidDate"===y.sortBy?e.paidDate?s.paidDate?"asc"===y.sortOrder?new Date(e.paidDate).getTime()-new Date(s.paidDate).getTime():new Date(s.paidDate).getTime()-new Date(e.paidDate).getTime():"asc"===y.sortOrder?-1:1:"asc"===y.sortOrder?1:-1:"amount"===y.sortBy?"asc"===y.sortOrder?e.amount-s.amount:s.amount-e.amount:"reseller"===y.sortBy?"asc"===y.sortOrder?e.transaction.reseller.name.localeCompare(s.transaction.reseller.name):s.transaction.reseller.name.localeCompare(e.transaction.reseller.name):0)},[s,a,N,y]),C=(0,r.useMemo)(()=>{if("none"===y.groupBy)return{"Semua Pembayaran":P};let e={};return P.forEach(s=>{let a="";if("reseller"===y.groupBy)a=s.transaction.reseller.name;else if("month"===y.groupBy){let e=new Date(s.dueDate);a=(0,A.GP)(e,"MMMM yyyy",{locale:D.id})}else if("status"===y.groupBy)switch(s.status){case"WAITING_FOR_PAYMENT":a="Menunggu Pembayaran";break;case"WAITING_FOR_APPROVAL":a="Menunggu Persetujuan";break;case"APPROVED":a="Disetujui";break;case"REJECTED":a="Ditolak";break;default:a="Lainnya"}e[a]||(e[a]=[]),e[a].push(s)}),e},[P,y.groupBy]),T=e=>{switch(e){case"WAITING_FOR_PAYMENT":return(0,t.jsxs)(o.E,{variant:"outline",className:"flex items-center gap-1",children:[(0,t.jsx)(x.A,{className:"h-3 w-3"}),"Menunggu Pembayaran"]});case"WAITING_FOR_APPROVAL":return(0,t.jsxs)(o.E,{variant:"outline",className:"flex items-center gap-1",children:[(0,t.jsx)(x.A,{className:"h-3 w-3"}),"Menunggu Persetujuan"]});case"APPROVED":return(0,t.jsxs)(o.E,{variant:"success",className:"flex items-center gap-1",children:[(0,t.jsx)(f.A,{className:"h-3 w-3"}),"Disetujui"]});case"REJECTED":return(0,t.jsxs)(o.E,{variant:"destructive",className:"flex items-center gap-1",children:[(0,t.jsx)(h.A,{className:"h-3 w-3"}),"Ditolak"]});default:return(0,t.jsx)(o.E,{variant:"outline",children:e})}};if(0===s.length)return(0,t.jsx)(d.Zp,{children:(0,t.jsxs)(d.Wu,{className:"flex flex-col items-center justify-center p-6",children:[(0,t.jsx)(p.A,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,t.jsx)("p",{className:"text-lg font-medium text-center",children:"Belum ada pembayaran"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground text-center mt-1",children:"Pembayaran akan muncul setelah reseller membuat transaksi"})]})});let R=s.filter(e=>"WAITING_FOR_APPROVAL"===e.status).length;return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,t.jsxs)("div",{className:"relative w-full md:w-64",children:[(0,t.jsx)(j.A,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(m.p,{type:"search",placeholder:"Cari pembayaran...",className:"pl-8",value:N,onChange:e=>v(e.target.value)})]}),(0,t.jsx)(w,{onFilterChange:b}),(0,t.jsx)(c.tU,{defaultValue:"WAITING_FOR_APPROVAL",value:a,onValueChange:l,className:"w-full md:w-auto",children:(0,t.jsxs)(c.j7,{className:"grid w-full grid-cols-5",children:[(0,t.jsx)(c.Xi,{value:"all",children:"Semua"}),(0,t.jsx)(c.Xi,{value:"WAITING_FOR_PAYMENT",children:"Menunggu Pembayaran"}),(0,t.jsxs)(c.Xi,{value:"WAITING_FOR_APPROVAL",children:["Menunggu Persetujuan ",R>0&&"(".concat(R,")")]}),(0,t.jsx)(c.Xi,{value:"APPROVED",children:"Disetujui"}),(0,t.jsx)(c.Xi,{value:"REJECTED",children:"Ditolak"})]})})]}),0===Object.keys(C).length?(0,t.jsx)(d.Zp,{children:(0,t.jsxs)(d.Wu,{className:"flex flex-col items-center justify-center p-6",children:[(0,t.jsx)(j.A,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,t.jsx)("p",{className:"text-lg font-medium text-center",children:"Tidak ada pembayaran"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground text-center mt-1",children:"Tidak ada pembayaran yang sesuai dengan filter"})]})}):(0,t.jsx)("div",{className:"space-y-8",children:Object.entries(C).map(e=>{let[s,a]=e;return(0,t.jsxs)("div",{className:"space-y-4",children:["none"!==y.groupBy&&(0,t.jsx)("h3",{className:"text-lg font-semibold",children:s}),(0,t.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:a.map(e=>(0,t.jsxs)(d.Zp,{children:[(0,t.jsxs)(d.aR,{className:"pb-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(d.ZB,{className:"text-lg",children:e.transaction.package.name}),T(e.status)]}),(0,t.jsxs)(d.BT,{className:"mt-2",children:["Pelanggan: ",e.transaction.customerName]})]}),(0,t.jsx)(d.Wu,{className:"pb-3",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Reseller:"}),(0,t.jsx)("span",{className:"font-medium",children:e.transaction.reseller.name})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Jumlah:"}),(0,t.jsx)("span",{className:"font-medium",children:(0,u.vv)(e.amount)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Jatuh Tempo:"}),(0,t.jsx)("span",{className:"font-medium",children:(0,u.Yq)(e.dueDate)})]}),e.paidDate&&(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Tanggal Bayar:"}),(0,t.jsx)("span",{className:"font-medium",children:(0,u.Yq)(e.paidDate)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Metode:"}),(0,t.jsx)("span",{className:"font-medium",children:"TRANSFER"===e.paymentMethod?"Transfer Bank":"Tunai"})]}),e.resellerBonus&&(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Bonus Reseller:"}),(0,t.jsx)("span",{className:"font-medium",children:(0,u.vv)(e.resellerBonus)})]}),e.adminBonus&&(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Bonus Admin:"}),(0,t.jsx)("span",{className:"font-medium",children:(0,u.vv)(e.adminBonus)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Bukti Pembayaran:"}),(0,t.jsx)("span",{className:"font-medium",children:e.proofImageUrl?(0,t.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>window.open(e.proofImageUrl,"_blank"),children:[(0,t.jsx)(g.A,{className:"mr-2 h-4 w-4"}),"Lihat"]}):"CASH"===e.paymentMethod?"Pembayaran Tunai":"Belum diunggah"})]})]})}),(0,t.jsx)("div",{className:"px-6 pb-6",children:(0,t.jsx)(n(),{href:"/admin/payments/".concat(e.id),children:(0,t.jsx)(i.$,{className:"w-full",children:"WAITING_FOR_APPROVAL"===e.status?"Proses Pembayaran":"Lihat Detail"})})})]},e.id))})]},s)})})]})}},39286:(e,s,a)=>{"use strict";a.d(s,{E:()=>i});var t=a(95155);a(12115);var r=a(31027),l=a(29602);let n=(0,r.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:s,variant:a,...r}=e;return(0,t.jsx)("div",{className:(0,l.cn)(n({variant:a}),s),...r})}},9955:(e,s,a)=>{"use strict";a.d(s,{p:()=>n});var t=a(95155),r=a(12115),l=a(29602);let n=r.forwardRef((e,s)=>{let{className:a,type:r,...n}=e;return(0,t.jsx)("input",{type:r,className:(0,l.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...n})});n.displayName="Input"},15785:(e,s,a)=>{"use strict";a.d(s,{J:()=>c});var t=a(95155),r=a(12115),l=a(46195),n=a(31027),i=a(29602);let d=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.b,{ref:s,className:(0,i.cn)(d(),a),...r})});c.displayName=l.b.displayName},51124:(e,s,a)=>{"use strict";a.d(s,{AM:()=>i,Wv:()=>d,hl:()=>c});var t=a(95155),r=a(12115),l=a(80532),n=a(29602);let i=l.bL,d=l.l9;l.Mz;let c=r.forwardRef((e,s)=>{let{className:a,align:r="center",sideOffset:i=4,...d}=e;return(0,t.jsx)(l.ZL,{children:(0,t.jsx)(l.UC,{ref:s,align:r,sideOffset:i,className:(0,n.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...d})})});c.displayName=l.UC.displayName},10332:(e,s,a)=>{"use strict";a.d(s,{C:()=>c,z:()=>d});var t=a(95155),r=a(12115),l=a(852),n=a(33565),i=a(29602);let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.bL,{className:(0,i.cn)("grid gap-2",a),...r,ref:s})});d.displayName=l.bL.displayName;let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.q7,{ref:s,className:(0,i.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),...r,children:(0,t.jsx)(l.C1,{className:"flex items-center justify-center",children:(0,t.jsx)(n.A,{className:"h-3.5 w-3.5 fill-primary"})})})});c.displayName=l.q7.displayName},31641:(e,s,a)=>{"use strict";a.d(s,{Xi:()=>c,av:()=>o,j7:()=>d,tU:()=>i});var t=a(95155),r=a(12115),l=a(58629),n=a(29602);let i=l.bL,d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.B8,{ref:s,className:(0,n.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",a),...r})});d.displayName=l.B8.displayName;let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.l9,{ref:s,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",a),...r})});c.displayName=l.l9.displayName;let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.UC,{ref:s,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...r})});o.displayName=l.UC.displayName}},e=>{var s=s=>e(e.s=s);e.O(0,[2374,1078,508,5365,5836,8441,1517,7358],()=>s(18360)),_N_E=e.O()}]);