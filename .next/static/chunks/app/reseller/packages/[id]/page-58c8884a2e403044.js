(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6123],{13700:(e,s,a)=>{Promise.resolve().then(a.bind(a,60993)),Promise.resolve().then(a.bind(a,85095)),Promise.resolve().then(a.bind(a,59044))},98662:(e,s,a)=>{"use strict";a.d(s,{c:()=>l});var t=a(95155),r=a(44200),n=a(60719),i=a(29602);function l(e){let{icon:s,className:a,...l}=e,o=r[s]||n.A;return(0,t.jsx)(o,{className:(0,i.cn)("h-4 w-4",a),...l})}},60993:(e,s,a)=>{"use strict";a.d(s,{PackageDetail:()=>k});var t=a(95155),r=a(12115),n=a(76046),i=a(5565),l=a(14085),o=a(35007),d=a(8102),c=a(29602),m=a(98662),u=a(87364),x=a(60719),h=a(18474),p=a(69606),f=a(85060),j=a(43415),v=a(34839),N=a(9955),b=a(10371),g=a(89134),w=a(14505);let y=j.z.object({customerName:j.z.string().min(1,"Nama pelanggan wajib diisi"),customerPhone:j.z.string().min(1,"Nomor telepon wajib diisi"),customerAddress:j.z.string().optional()});function T(e){let{packageData:s,resellerId:a,onCancel:i}=e,[d,m]=(0,r.useState)(!1),u=(0,n.useRouter)(),{toast:x}=(0,g.dj)(),h=(0,p.mN)({resolver:(0,f.u)(y),defaultValues:{customerName:"",customerPhone:"",customerAddress:""}}),j=async e=>{m(!0);try{let t=await fetch("/api/transactions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,packageId:s.id,resellerId:a,totalAmount:s.price,tenorMonths:s.tenorMonths,monthlyAmount:s.monthlyAmount})});if(!t.ok){let e=await t.json();throw Error(e.message||"Terjadi kesalahan saat membuat transaksi")}let r=await t.json();x({title:"Berhasil",description:"Transaksi berhasil dibuat"}),u.push("/reseller/transactions/".concat(r.id)),u.refresh()}catch(e){x({variant:"destructive",title:"Gagal",description:e instanceof Error?e.message:"Terjadi kesalahan saat membuat transaksi"})}finally{m(!1)}};return(0,t.jsxs)(o.Zp,{children:[(0,t.jsxs)(o.aR,{children:[(0,t.jsx)(o.ZB,{children:"Buat Transaksi"}),(0,t.jsx)(o.BT,{children:"Masukkan informasi pelanggan untuk membuat transaksi baru"})]}),(0,t.jsxs)(o.Wu,{children:[(0,t.jsxs)("div",{className:"mb-6 p-4 bg-muted rounded-md",children:[(0,t.jsx)("h3",{className:"font-medium mb-2",children:"Informasi Paket"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,t.jsx)("div",{children:"Nama Paket:"}),(0,t.jsx)("div",{className:"font-medium",children:s.name}),(0,t.jsx)("div",{children:"Harga Total:"}),(0,t.jsx)("div",{className:"font-medium",children:(0,c.vv)(s.price)}),(0,t.jsx)("div",{children:"Tenor:"}),(0,t.jsxs)("div",{className:"font-medium",children:[s.tenorMonths," bulan"]}),(0,t.jsx)("div",{children:"Cicilan per Bulan:"}),(0,t.jsx)("div",{className:"font-medium",children:(0,c.vv)(s.monthlyAmount)})]})]}),(0,t.jsx)(v.lV,{...h,children:(0,t.jsxs)("form",{onSubmit:h.handleSubmit(j),className:"space-y-4",children:[(0,t.jsx)(v.zB,{control:h.control,name:"customerName",render:e=>{let{field:s}=e;return(0,t.jsxs)(v.eI,{children:[(0,t.jsx)(v.lR,{children:"Nama Pelanggan"}),(0,t.jsx)(v.MJ,{children:(0,t.jsx)(N.p,{placeholder:"Masukkan nama pelanggan",...s})}),(0,t.jsx)(v.C5,{})]})}}),(0,t.jsx)(v.zB,{control:h.control,name:"customerPhone",render:e=>{let{field:s}=e;return(0,t.jsxs)(v.eI,{children:[(0,t.jsx)(v.lR,{children:"Nomor Telepon"}),(0,t.jsx)(v.MJ,{children:(0,t.jsx)(N.p,{placeholder:"Masukkan nomor telepon pelanggan",...s})}),(0,t.jsx)(v.C5,{})]})}}),(0,t.jsx)(v.zB,{control:h.control,name:"customerAddress",render:e=>{let{field:s}=e;return(0,t.jsxs)(v.eI,{children:[(0,t.jsx)(v.lR,{children:"Alamat (Opsional)"}),(0,t.jsx)(v.MJ,{children:(0,t.jsx)(b.T,{placeholder:"Masukkan alamat pelanggan",...s,value:s.value||""})}),(0,t.jsx)(v.C5,{})]})}})]})})]}),(0,t.jsxs)(o.wL,{className:"flex justify-end gap-4",children:[(0,t.jsx)(l.$,{type:"button",variant:"outline",onClick:i,disabled:d,children:"Batal"}),(0,t.jsxs)(l.$,{onClick:h.handleSubmit(j),disabled:d,children:[d&&(0,t.jsx)(w.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Buat Transaksi"]})]})]})}function k(e){let{packageData:s,resellerId:a}=e,[p,f]=(0,r.useState)(!1),j=(0,n.useRouter)();return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(l.$,{variant:"outline",size:"icon",onClick:()=>j.back(),className:"h-8 w-8",children:(0,t.jsx)(u.A,{className:"h-4 w-4"})}),(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Detail Paket"})]}),(0,t.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,t.jsxs)(o.Zp,{children:[(0,t.jsxs)(o.aR,{className:"pb-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(m.c,{icon:s.packageType.icon,className:"h-5 w-5"}),(0,t.jsx)(o.ZB,{children:s.name})]}),(0,t.jsx)(o.BT,{className:"mt-2",children:s.description||"Tidak ada deskripsi"})]}),(0,t.jsx)(o.Wu,{className:"pb-3",children:(0,t.jsx)("div",{className:"aspect-video relative rounded-md overflow-hidden mb-4",children:s.imageUrl?(0,t.jsx)(i.default,{src:s.imageUrl||"/placeholder.svg",alt:s.name,fill:!0,className:"object-cover"}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-muted",children:(0,t.jsx)(x.A,{className:"h-12 w-12 text-muted-foreground"})})})})]}),(0,t.jsxs)(o.Zp,{children:[(0,t.jsx)(o.aR,{children:(0,t.jsx)(o.ZB,{children:"Informasi Harga"})}),(0,t.jsx)(o.Wu,{className:"space-y-4",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Jenis Paket:"}),(0,t.jsx)("span",{className:"font-medium",children:s.packageType.name})]}),(0,t.jsx)(d.w,{}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Harga Total:"}),(0,t.jsx)("span",{className:"font-medium",children:(0,c.vv)(s.price)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Tenor:"}),(0,t.jsxs)("span",{className:"font-medium",children:[s.tenorMonths," bulan"]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Cicilan per Bulan:"}),(0,t.jsx)("span",{className:"font-medium",children:(0,c.vv)(s.monthlyAmount)})]})]})}),(0,t.jsx)(o.wL,{children:(0,t.jsxs)(l.$,{className:"w-full",onClick:()=>f(!0),disabled:p,children:[(0,t.jsx)(h.A,{className:"mr-2 h-4 w-4"}),"Buat Transaksi"]})})]})]}),p&&(0,t.jsx)(T,{packageData:s,resellerId:a,onCancel:()=>f(!1)})]})}},34839:(e,s,a)=>{"use strict";a.d(s,{C5:()=>v,MJ:()=>f,Rr:()=>j,eI:()=>h,lR:()=>p,lV:()=>d,zB:()=>m});var t=a(95155),r=a(12115),n=a(12317),i=a(69606),l=a(29602),o=a(15785);let d=i.Op,c=r.createContext({}),m=e=>{let{...s}=e;return(0,t.jsx)(c.Provider,{value:{name:s.name},children:(0,t.jsx)(i.xI,{...s})})},u=()=>{let e=r.useContext(c),s=r.useContext(x),{getFieldState:a,formState:t}=(0,i.xW)(),n=a(e.name,t);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=s;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...n}},x=r.createContext({}),h=r.forwardRef((e,s)=>{let{className:a,...n}=e,i=r.useId();return(0,t.jsx)(x.Provider,{value:{id:i},children:(0,t.jsx)("div",{ref:s,className:(0,l.cn)("space-y-2",a),...n})})});h.displayName="FormItem";let p=r.forwardRef((e,s)=>{let{className:a,...r}=e,{error:n,formItemId:i}=u();return(0,t.jsx)(o.J,{ref:s,className:(0,l.cn)(n&&"text-destructive",a),htmlFor:i,...r})});p.displayName="FormLabel";let f=r.forwardRef((e,s)=>{let{...a}=e,{error:r,formItemId:i,formDescriptionId:l,formMessageId:o}=u();return(0,t.jsx)(n.DX,{ref:s,id:i,"aria-describedby":r?"".concat(l," ").concat(o):"".concat(l),"aria-invalid":!!r,...a})});f.displayName="FormControl";let j=r.forwardRef((e,s)=>{let{className:a,...r}=e,{formDescriptionId:n}=u();return(0,t.jsx)("p",{ref:s,id:n,className:(0,l.cn)("text-[0.8rem] text-muted-foreground",a),...r})});j.displayName="FormDescription";let v=r.forwardRef((e,s)=>{var a;let{className:r,children:n,...i}=e,{error:o,formMessageId:d}=u(),c=o?String(null!==(a=null==o?void 0:o.message)&&void 0!==a?a:""):n;return c?(0,t.jsx)("p",{ref:s,id:d,className:(0,l.cn)("text-[0.8rem] font-medium text-destructive",r),...i,children:c}):null});v.displayName="FormMessage"},9955:(e,s,a)=>{"use strict";a.d(s,{p:()=>i});var t=a(95155),r=a(12115),n=a(29602);let i=r.forwardRef((e,s)=>{let{className:a,type:r,...i}=e;return(0,t.jsx)("input",{type:r,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...i})});i.displayName="Input"},15785:(e,s,a)=>{"use strict";a.d(s,{J:()=>d});var t=a(95155),r=a(12115),n=a(46195),i=a(31027),l=a(29602);let o=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(n.b,{ref:s,className:(0,l.cn)(o(),a),...r})});d.displayName=n.b.displayName},8102:(e,s,a)=>{"use strict";a.d(s,{w:()=>c});var t=a(95155),r=a(12115),n=a(23360),i="horizontal",l=["horizontal","vertical"],o=r.forwardRef((e,s)=>{let{decorative:a,orientation:r=i,...o}=e,d=l.includes(r)?r:i;return(0,t.jsx)(n.sG.div,{"data-orientation":d,...a?{role:"none"}:{"aria-orientation":"vertical"===d?d:void 0,role:"separator"},...o,ref:s})});o.displayName="Separator";var d=a(29602);let c=r.forwardRef((e,s)=>{let{className:a,orientation:r="horizontal",decorative:n=!0,...i}=e;return(0,t.jsx)(o,{ref:s,decorative:n,orientation:r,className:(0,d.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",a),...i})});c.displayName=o.displayName},10371:(e,s,a)=>{"use strict";a.d(s,{T:()=>i});var t=a(95155),r=a(12115),n=a(29602);let i=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("textarea",{className:(0,n.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...r})});i.displayName="Textarea"},89134:(e,s,a)=>{"use strict";a.d(s,{dj:()=>u});var t=a(12115);let r=0,n=new Map,i=e=>{if(n.has(e))return;let s=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,s)},l=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=s;return a?i(a):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},o=[],d={toasts:[]};function c(e){d=l(d,e),o.forEach(e=>{e(d)})}function m(e){let{...s}=e,a=(r=(r+1)%Number.MAX_VALUE).toString(),t=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...s,id:a,open:!0,onOpenChange:e=>{e||t()}}}),{id:a,dismiss:t,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function u(){let[e,s]=t.useState(d);return t.useEffect(()=>(o.push(s),()=>{let e=o.indexOf(s);e>-1&&o.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}}},e=>{var s=s=>e(e.s=s);e.O(0,[8568,2374,1078,508,2367,7518,5565,284,8441,1517,7358],()=>s(13700)),_N_E=e.O()}]);