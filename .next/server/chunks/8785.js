exports.id=8785,exports.ids=[8785],exports.modules={78201:(e,a,t)=>{Promise.resolve().then(t.bind(t,22323)),Promise.resolve().then(t.bind(t,5986)),Promise.resolve().then(t.bind(t,19869))},14649:(e,a,t)=>{Promise.resolve().then(t.bind(t,72119)),Promise.resolve().then(t.bind(t,73654)),Promise.resolve().then(t.bind(t,49747))},49747:(e,a,t)=>{"use strict";t.d(a,{PackageForm:()=>z});var s=t(45512),r=t(58009),n=t(79334),i=t(6868),l=t(81914),o=t(16131),d=t(87021),c=t(94727),m=t(25409),p=t(48859),u=t(81477),f=t(98755),h=t(28638),x=t(24849),j=t(59462);let g=u.bL;u.YJ;let b=u.WT,y=r.forwardRef(({className:e,children:a,...t},r)=>(0,s.jsxs)(u.l9,{ref:r,className:(0,j.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...t,children:[a,(0,s.jsx)(u.In,{asChild:!0,children:(0,s.jsx)(f.A,{className:"h-4 w-4 opacity-50"})})]}));y.displayName=u.l9.displayName;let v=r.forwardRef(({className:e,...a},t)=>(0,s.jsx)(u.PP,{ref:t,className:(0,j.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:(0,s.jsx)(h.A,{className:"h-4 w-4"})}));v.displayName=u.PP.displayName;let w=r.forwardRef(({className:e,...a},t)=>(0,s.jsx)(u.wn,{ref:t,className:(0,j.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:(0,s.jsx)(f.A,{className:"h-4 w-4"})}));w.displayName=u.wn.displayName;let N=r.forwardRef(({className:e,children:a,position:t="popper",...r},n)=>(0,s.jsx)(u.ZL,{children:(0,s.jsxs)(u.UC,{ref:n,className:(0,j.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...r,children:[(0,s.jsx)(v,{}),(0,s.jsx)(u.LM,{className:(0,j.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,s.jsx)(w,{})]})}));N.displayName=u.UC.displayName,r.forwardRef(({className:e,...a},t)=>(0,s.jsx)(u.JU,{ref:t,className:(0,j.cn)("px-2 py-1.5 text-sm font-semibold",e),...a})).displayName=u.JU.displayName;let k=r.forwardRef(({className:e,children:a,...t},r)=>(0,s.jsxs)(u.q7,{ref:r,className:(0,j.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[(0,s.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(u.VF,{children:(0,s.jsx)(x.A,{className:"h-4 w-4"})})}),(0,s.jsx)(u.p4,{children:a})]}));k.displayName=u.q7.displayName,r.forwardRef(({className:e,...a},t)=>(0,s.jsx)(u.wv,{ref:t,className:(0,j.cn)("-mx-1 my-1 h-px bg-muted",e),...a})).displayName=u.wv.displayName;var T=t(65518),C=t(97643),A=t(2112);let R=r.forwardRef(({className:e,...a},t)=>(0,s.jsx)(A.bL,{ref:t,className:(0,j.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...a,children:(0,s.jsx)(A.C1,{className:(0,j.cn)("flex items-center justify-center text-current"),children:(0,s.jsx)(x.A,{className:"h-4 w-4"})})}));R.displayName=A.bL.displayName;var P=t(72744),I=t(44269),S=t(86235),M=t(45103);let F=o.z.object({name:o.z.string().min(1,"Nama paket wajib diisi"),description:o.z.string().optional(),price:o.z.coerce.number().positive("Harga harus lebih dari 0"),tenorMonths:o.z.coerce.number().int().positive("Tenor harus lebih dari 0"),monthlyAmount:o.z.coerce.number().positive("Cicilan bulanan harus lebih dari 0"),packageTypeId:o.z.string().min(1,"Jenis paket wajib dipilih"),isActive:o.z.boolean().default(!0)});function z({packageTypes:e,packageData:a}){let[t,o]=(0,r.useState)(!1),[u,f]=(0,r.useState)(null),[h,x]=(0,r.useState)(a?.imageUrl||null),[j,v]=(0,r.useState)(!1),w=(0,r.useRef)(null),A=(0,n.useRouter)(),{toast:z}=(0,T.dj)(),O=(0,i.mN)({resolver:(0,l.u)(F),defaultValues:{name:a?.name||"",description:a?.description||"",price:a?.price||0,tenorMonths:a?.tenorMonths||12,monthlyAmount:a?.monthlyAmount||0,packageTypeId:a?.packageTypeId||"",isActive:a?.isActive??!0}}),J=async e=>{v(!0);try{let a=new FormData;a.append("file",e);let t=await fetch("/api/upload",{method:"POST",body:a});if(!t.ok){let e=await t.json();throw Error(e.message||"Terjadi kesalahan saat mengunggah gambar")}return(await t.json()).fileUrl}catch(e){throw e}finally{v(!1)}},D=async e=>{o(!0);try{let t=a?.imageUrl||null;u&&(t=await J(u));let s=a?`/api/packages/${a.id}`:"/api/packages",r=a?"PUT":"POST",n=await fetch(s,{method:r,headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,imageUrl:t})});if(!n.ok){let e=await n.json();throw Error(e.message||"Terjadi kesalahan saat menyimpan paket")}z({title:"Berhasil",description:a?"Paket berhasil diperbarui":"Paket berhasil ditambahkan"}),A.push("/admin/packages"),A.refresh()}catch(e){z({variant:"destructive",title:"Gagal",description:e instanceof Error?e.message:"Terjadi kesalahan saat menyimpan paket"})}finally{o(!1)}},E=(e,a)=>{e&&a&&a>0&&O.setValue("monthlyAmount",e/a)};return(0,s.jsx)(C.Zp,{children:(0,s.jsx)(C.Wu,{className:"pt-6",children:(0,s.jsx)(c.lV,{...O,children:(0,s.jsxs)("form",{onSubmit:O.handleSubmit(D),className:"space-y-6",children:[(0,s.jsx)(c.zB,{control:O.control,name:"name",render:({field:e})=>(0,s.jsxs)(c.eI,{children:[(0,s.jsx)(c.lR,{children:"Nama Paket"}),(0,s.jsx)(c.MJ,{children:(0,s.jsx)(m.p,{placeholder:"Masukkan nama paket",...e})}),(0,s.jsx)(c.C5,{})]})}),(0,s.jsx)(c.zB,{control:O.control,name:"description",render:({field:e})=>(0,s.jsxs)(c.eI,{children:[(0,s.jsx)(c.lR,{children:"Deskripsi (Opsional)"}),(0,s.jsx)(c.MJ,{children:(0,s.jsx)(p.T,{placeholder:"Masukkan deskripsi paket",...e,value:e.value||""})}),(0,s.jsx)(c.C5,{})]})}),(0,s.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,s.jsx)(c.zB,{control:O.control,name:"price",render:({field:e})=>(0,s.jsxs)(c.eI,{children:[(0,s.jsx)(c.lR,{children:"Harga Total (Rp)"}),(0,s.jsx)(c.MJ,{children:(0,s.jsx)(m.p,{type:"number",placeholder:"Masukkan harga total",...e,onChange:a=>{e.onChange(a),E(Number.parseFloat(a.target.value),O.getValues("tenorMonths"))}})}),(0,s.jsx)(c.C5,{})]})}),(0,s.jsx)(c.zB,{control:O.control,name:"tenorMonths",render:({field:e})=>(0,s.jsxs)(c.eI,{children:[(0,s.jsx)(c.lR,{children:"Tenor (Bulan)"}),(0,s.jsx)(c.MJ,{children:(0,s.jsx)(m.p,{type:"number",placeholder:"Masukkan tenor dalam bulan",...e,onChange:a=>{e.onChange(a),E(O.getValues("price"),Number.parseFloat(a.target.value))}})}),(0,s.jsx)(c.C5,{})]})})]}),(0,s.jsx)(c.zB,{control:O.control,name:"monthlyAmount",render:({field:e})=>(0,s.jsxs)(c.eI,{children:[(0,s.jsx)(c.lR,{children:"Cicilan per Bulan (Rp)"}),(0,s.jsx)(c.MJ,{children:(0,s.jsx)(m.p,{type:"number",placeholder:"Masukkan cicilan per bulan",...e})}),(0,s.jsx)(c.C5,{})]})}),(0,s.jsx)(c.zB,{control:O.control,name:"packageTypeId",render:({field:a})=>(0,s.jsxs)(c.eI,{children:[(0,s.jsx)(c.lR,{children:"Jenis Paket"}),(0,s.jsxs)(g,{onValueChange:a.onChange,defaultValue:a.value,children:[(0,s.jsx)(c.MJ,{children:(0,s.jsx)(y,{children:(0,s.jsx)(b,{placeholder:"Pilih jenis paket"})})}),(0,s.jsx)(N,{children:e.map(e=>(0,s.jsx)(k,{value:e.id,children:e.name},e.id))})]}),(0,s.jsx)(c.C5,{})]})}),(0,s.jsx)(c.zB,{control:O.control,name:"isActive",render:({field:e})=>(0,s.jsxs)(c.eI,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[(0,s.jsx)(c.MJ,{children:(0,s.jsx)(R,{checked:e.value,onCheckedChange:e.onChange})}),(0,s.jsxs)("div",{className:"space-y-1 leading-none",children:[(0,s.jsx)(c.lR,{children:"Aktif"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Paket yang aktif akan ditampilkan kepada reseller"})]})]})}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c.lR,{children:"Gambar Paket (Opsional)"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)(d.$,{type:"button",variant:"outline",onClick:()=>w.current?.click(),children:[(0,s.jsx)(P.A,{className:"mr-2 h-4 w-4"}),"Unggah Gambar"]}),(0,s.jsx)(m.p,{ref:w,type:"file",accept:"image/jpeg, image/png",className:"hidden",onChange:e=>{let a=e.target.files?.[0];if(!a)return;if(!["image/jpeg","image/png","image/jpg"].includes(a.type)){z({variant:"destructive",title:"Format file tidak didukung",description:"Silakan unggah file dengan format JPG atau PNG"});return}if(a.size>5242880){z({variant:"destructive",title:"Ukuran file terlalu besar",description:"Ukuran file maksimal 5MB"});return}f(a);let t=new FileReader;t.onloadend=()=>{x(t.result)},t.readAsDataURL(a)}}),h&&(0,s.jsxs)(d.$,{type:"button",variant:"destructive",size:"sm",onClick:()=>{f(null),x(null),w.current&&(w.current.value="")},children:[(0,s.jsx)(I.A,{className:"mr-2 h-4 w-4"}),"Hapus Gambar"]})]}),h&&(0,s.jsx)("div",{className:"mt-4 relative aspect-video w-full max-w-md rounded-md overflow-hidden border",children:(0,s.jsx)(M.default,{src:h||"/placeholder.svg",alt:"Preview",fill:!0,className:"object-cover"})})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,s.jsx)(d.$,{type:"button",variant:"outline",onClick:()=>A.push("/admin/packages"),children:"Batal"}),(0,s.jsxs)(d.$,{type:"submit",disabled:t||j,children:[(t||j)&&(0,s.jsx)(S.A,{className:"mr-2 h-4 w-4 animate-spin"}),a?"Perbarui":"Simpan"]})]})]})})})})}},94727:(e,a,t)=>{"use strict";t.d(a,{C5:()=>g,MJ:()=>x,Rr:()=>j,eI:()=>f,lR:()=>h,lV:()=>d,zB:()=>m});var s=t(45512),r=t(58009),n=t(12705),i=t(6868),l=t(59462),o=t(47699);let d=i.Op,c=r.createContext({}),m=({...e})=>(0,s.jsx)(c.Provider,{value:{name:e.name},children:(0,s.jsx)(i.xI,{...e})}),p=()=>{let e=r.useContext(c),a=r.useContext(u),{getFieldState:t,formState:s}=(0,i.xW)(),n=t(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=a;return{id:l,name:e.name,formItemId:`${l}-form-item`,formDescriptionId:`${l}-form-item-description`,formMessageId:`${l}-form-item-message`,...n}},u=r.createContext({}),f=r.forwardRef(({className:e,...a},t)=>{let n=r.useId();return(0,s.jsx)(u.Provider,{value:{id:n},children:(0,s.jsx)("div",{ref:t,className:(0,l.cn)("space-y-2",e),...a})})});f.displayName="FormItem";let h=r.forwardRef(({className:e,...a},t)=>{let{error:r,formItemId:n}=p();return(0,s.jsx)(o.J,{ref:t,className:(0,l.cn)(r&&"text-destructive",e),htmlFor:n,...a})});h.displayName="FormLabel";let x=r.forwardRef(({...e},a)=>{let{error:t,formItemId:r,formDescriptionId:i,formMessageId:l}=p();return(0,s.jsx)(n.DX,{ref:a,id:r,"aria-describedby":t?`${i} ${l}`:`${i}`,"aria-invalid":!!t,...e})});x.displayName="FormControl";let j=r.forwardRef(({className:e,...a},t)=>{let{formDescriptionId:r}=p();return(0,s.jsx)("p",{ref:t,id:r,className:(0,l.cn)("text-[0.8rem] text-muted-foreground",e),...a})});j.displayName="FormDescription";let g=r.forwardRef(({className:e,children:a,...t},r)=>{let{error:n,formMessageId:i}=p(),o=n?String(n?.message??""):a;return o?(0,s.jsx)("p",{ref:r,id:i,className:(0,l.cn)("text-[0.8rem] font-medium text-destructive",e),...t,children:o}):null});g.displayName="FormMessage"},25409:(e,a,t)=>{"use strict";t.d(a,{p:()=>i});var s=t(45512),r=t(58009),n=t(59462);let i=r.forwardRef(({className:e,type:a,...t},r)=>(0,s.jsx)("input",{type:a,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));i.displayName="Input"},47699:(e,a,t)=>{"use strict";t.d(a,{J:()=>d});var s=t(45512),r=t(58009),n=t(92405),i=t(21643),l=t(59462);let o=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef(({className:e,...a},t)=>(0,s.jsx)(n.b,{ref:t,className:(0,l.cn)(o(),e),...a}));d.displayName=n.b.displayName},48859:(e,a,t)=>{"use strict";t.d(a,{T:()=>i});var s=t(45512),r=t(58009),n=t(59462);let i=r.forwardRef(({className:e,...a},t)=>(0,s.jsx)("textarea",{className:(0,n.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:t,...a}));i.displayName="Textarea"},65518:(e,a,t)=>{"use strict";t.d(a,{dj:()=>p});var s=t(58009);let r=0,n=new Map,i=e=>{if(n.has(e))return;let a=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,a)},l=(e,a)=>{switch(a.type){case"ADD_TOAST":return{...e,toasts:[a.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===a.toast.id?{...e,...a.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=a;return t?i(t):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===a.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==a.toastId)}}},o=[],d={toasts:[]};function c(e){d=l(d,e),o.forEach(e=>{e(d)})}function m({...e}){let a=(r=(r+1)%Number.MAX_VALUE).toString(),t=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...e,id:a,open:!0,onOpenChange:e=>{e||t()}}}),{id:a,dismiss:t,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function p(){let[e,a]=s.useState(d);return s.useEffect(()=>(o.push(a),()=>{let e=o.indexOf(a);e>-1&&o.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},19869:(e,a,t)=>{"use strict";t.d(a,{PackageForm:()=>s});let s=(0,t(46760).registerClientReference)(function(){throw Error("Attempted to call PackageForm() from the server but PackageForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/beane/projects/my-app/my-app/components/admin/package-form.tsx","PackageForm")}};