(()=>{var e={};e.id=7122,e.ids=[7122],e.modules={96330:e=>{"use strict";e.exports=require("@prisma/client")},5486:e=>{"use strict";e.exports=require("bcrypt")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},12412:e=>{"use strict";e.exports=require("assert")},79428:e=>{"use strict";e.exports=require("buffer")},55511:e=>{"use strict";e.exports=require("crypto")},94735:e=>{"use strict";e.exports=require("events")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},33873:e=>{"use strict";e.exports=require("path")},11723:e=>{"use strict";e.exports=require("querystring")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},69221:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>c,pages:()=>u,routeModule:()=>m,tree:()=>d});var s=r(70260),a=r(28203),n=r(25155),i=r.n(n),o=r(67292),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d=["",{children:["admin",{children:["settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,87282)),"/home/beane/projects/my-app/my-app/app/admin/settings/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,19611)),"/home/beane/projects/my-app/my-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],u=["/home/beane/projects/my-app/my-app/app/admin/settings/page.tsx"],c={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/settings/page",pathname:"/admin/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},30470:(e,t,r)=>{Promise.resolve().then(r.bind(r,22323)),Promise.resolve().then(r.bind(r,5986)),Promise.resolve().then(r.bind(r,41580))},64974:(e,t,r)=>{Promise.resolve().then(r.bind(r,72119)),Promise.resolve().then(r.bind(r,73654)),Promise.resolve().then(r.bind(r,55088))},55088:(e,t,r)=>{"use strict";r.d(t,{BonusSettingsForm:()=>b});var s=r(45512),a=r(58009),n=r(79334),i=r(6868),o=r(81914),l=r(16131),d=r(87021),u=r(94727),c=r(25409),m=r(65518),p=r(97643),x=r(23956),h=r(86235);let f=l.z.object({resellerBonusRate:l.z.coerce.number().min(0,"Persentase bonus tidak boleh negatif").max(100,"Persentase bonus tidak boleh lebih dari 100%"),adminBonusRate:l.z.coerce.number().min(0,"Persentase bonus tidak boleh negatif").max(100,"Persentase bonus tidak boleh lebih dari 100%")});function b({initialValues:e}){let[t,r]=(0,a.useState)(!1),l=(0,n.useRouter)(),{toast:b}=(0,m.dj)(),y=(0,i.mN)({resolver:(0,o.u)(f),defaultValues:{resellerBonusRate:100*e.resellerBonusRate,adminBonusRate:100*e.adminBonusRate}}),v=async e=>{r(!0);try{let t={resellerBonusRate:e.resellerBonusRate/100,adminBonusRate:e.adminBonusRate/100},r=await fetch("/api/settings/bonus-rates",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok){let e=await r.json();throw Error(e.message||"Terjadi kesalahan saat menyimpan pengaturan")}b({title:"Berhasil",description:"Pengaturan bonus berhasil disimpan"}),l.refresh()}catch(e){b({variant:"destructive",title:"Gagal",description:e instanceof Error?e.message:"Terjadi kesalahan saat menyimpan pengaturan"})}finally{r(!1)}};return(0,s.jsxs)(p.Zp,{className:"max-w-md",children:[(0,s.jsxs)(p.aR,{children:[(0,s.jsx)(p.ZB,{children:"Pengaturan Bonus"}),(0,s.jsx)(p.BT,{children:"Atur persentase bonus untuk reseller dan admin"})]}),(0,s.jsx)(p.Wu,{children:(0,s.jsx)(u.lV,{...y,children:(0,s.jsxs)("form",{onSubmit:y.handleSubmit(v),className:"space-y-6",children:[(0,s.jsx)(u.zB,{control:y.control,name:"resellerBonusRate",render:({field:e})=>(0,s.jsxs)(u.eI,{children:[(0,s.jsx)(u.lR,{children:"Persentase Bonus Reseller (%)"}),(0,s.jsx)(u.MJ,{children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(c.p,{type:"number",step:"0.1",...e}),(0,s.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,s.jsx)(x.A,{className:"h-4 w-4 text-muted-foreground"})})]})}),(0,s.jsx)(u.Rr,{children:"Persentase dari jumlah pembayaran yang akan diberikan sebagai bonus kepada reseller"}),(0,s.jsx)(u.C5,{})]})}),(0,s.jsx)(u.zB,{control:y.control,name:"adminBonusRate",render:({field:e})=>(0,s.jsxs)(u.eI,{children:[(0,s.jsx)(u.lR,{children:"Persentase Bonus Admin (%)"}),(0,s.jsx)(u.MJ,{children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(c.p,{type:"number",step:"0.1",...e}),(0,s.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,s.jsx)(x.A,{className:"h-4 w-4 text-muted-foreground"})})]})}),(0,s.jsx)(u.Rr,{children:"Persentase dari jumlah pembayaran yang akan diberikan sebagai bonus kepada admin"}),(0,s.jsx)(u.C5,{})]})})]})})}),(0,s.jsx)(p.wL,{children:(0,s.jsxs)(d.$,{onClick:y.handleSubmit(v),disabled:t,className:"w-full",children:[t&&(0,s.jsx)(h.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Simpan Pengaturan"]})})]})}},94727:(e,t,r)=>{"use strict";r.d(t,{C5:()=>y,MJ:()=>f,Rr:()=>b,eI:()=>x,lR:()=>h,lV:()=>d,zB:()=>c});var s=r(45512),a=r(58009),n=r(12705),i=r(6868),o=r(59462),l=r(47699);let d=i.Op,u=a.createContext({}),c=({...e})=>(0,s.jsx)(u.Provider,{value:{name:e.name},children:(0,s.jsx)(i.xI,{...e})}),m=()=>{let e=a.useContext(u),t=a.useContext(p),{getFieldState:r,formState:s}=(0,i.xW)(),n=r(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=t;return{id:o,name:e.name,formItemId:`${o}-form-item`,formDescriptionId:`${o}-form-item-description`,formMessageId:`${o}-form-item-message`,...n}},p=a.createContext({}),x=a.forwardRef(({className:e,...t},r)=>{let n=a.useId();return(0,s.jsx)(p.Provider,{value:{id:n},children:(0,s.jsx)("div",{ref:r,className:(0,o.cn)("space-y-2",e),...t})})});x.displayName="FormItem";let h=a.forwardRef(({className:e,...t},r)=>{let{error:a,formItemId:n}=m();return(0,s.jsx)(l.J,{ref:r,className:(0,o.cn)(a&&"text-destructive",e),htmlFor:n,...t})});h.displayName="FormLabel";let f=a.forwardRef(({...e},t)=>{let{error:r,formItemId:a,formDescriptionId:i,formMessageId:o}=m();return(0,s.jsx)(n.DX,{ref:t,id:a,"aria-describedby":r?`${i} ${o}`:`${i}`,"aria-invalid":!!r,...e})});f.displayName="FormControl";let b=a.forwardRef(({className:e,...t},r)=>{let{formDescriptionId:a}=m();return(0,s.jsx)("p",{ref:r,id:a,className:(0,o.cn)("text-[0.8rem] text-muted-foreground",e),...t})});b.displayName="FormDescription";let y=a.forwardRef(({className:e,children:t,...r},a)=>{let{error:n,formMessageId:i}=m(),l=n?String(n?.message??""):t;return l?(0,s.jsx)("p",{ref:a,id:i,className:(0,o.cn)("text-[0.8rem] font-medium text-destructive",e),...r,children:l}):null});y.displayName="FormMessage"},25409:(e,t,r)=>{"use strict";r.d(t,{p:()=>i});var s=r(45512),a=r(58009),n=r(59462);let i=a.forwardRef(({className:e,type:t,...r},a)=>(0,s.jsx)("input",{type:t,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,...r}));i.displayName="Input"},47699:(e,t,r)=>{"use strict";r.d(t,{J:()=>d});var s=r(45512),a=r(58009),n=r(92405),i=r(21643),o=r(59462);let l=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(n.b,{ref:r,className:(0,o.cn)(l(),e),...t}));d.displayName=n.b.displayName},65518:(e,t,r)=>{"use strict";r.d(t,{dj:()=>m});var s=r(58009);let a=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),u({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],d={toasts:[]};function u(e){d=o(d,e),l.forEach(e=>{e(d)})}function c({...e}){let t=(a=(a+1)%Number.MAX_VALUE).toString(),r=()=>u({type:"DISMISS_TOAST",toastId:t});return u({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||r()}}}),{id:t,dismiss:r,update:e=>u({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function m(){let[e,t]=s.useState(d);return s.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>u({type:"DISMISS_TOAST",toastId:e})}}},10016:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(5187).A)("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]])},86235:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(5187).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},23956:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(5187).A)("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]])},94520:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(5187).A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},64977:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(5187).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},87282:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var s=r(62740),a=r(51825),n=r(31831),i=r(45369),o=r(62545),l=r(9742),d=r(41580);async function u(){let e=await (0,a.getServerSession)(i.N);e&&"ADMIN"===e.user.role||(0,n.redirect)("/");let t=await o.db.setting.findFirst({where:{key:"bonus_rates"}}),r={resellerBonusRate:.05,adminBonusRate:.05};if(t&&t.value)try{r=JSON.parse(t.value)}catch(e){console.error("Error parsing bonus rates:",e)}return(0,s.jsx)(l.U,{children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Pengaturan"}),(0,s.jsx)(d.BonusSettingsForm,{initialValues:r})]})})}},41580:(e,t,r)=>{"use strict";r.d(t,{BonusSettingsForm:()=>s});let s=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call BonusSettingsForm() from the server but BonusSettingsForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/beane/projects/my-app/my-app/components/admin/bonus-settings-form.tsx","BonusSettingsForm")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,8728,3618,7928,159,8310,4999,4563],()=>r(69221));module.exports=s})();