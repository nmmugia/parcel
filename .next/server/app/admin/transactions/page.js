(()=>{var e={};e.id=4426,e.ids=[4426],e.modules={96330:e=>{"use strict";e.exports=require("@prisma/client")},5486:e=>{"use strict";e.exports=require("bcrypt")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},12412:e=>{"use strict";e.exports=require("assert")},79428:e=>{"use strict";e.exports=require("buffer")},55511:e=>{"use strict";e.exports=require("crypto")},94735:e=>{"use strict";e.exports=require("events")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},33873:e=>{"use strict";e.exports=require("path")},11723:e=>{"use strict";e.exports=require("querystring")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},83061:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var r=s(70260),a=s(28203),n=s(25155),i=s.n(n),o=s(67292),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let d=["",{children:["admin",{children:["transactions",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,86146)),"/home/beane/projects/my-app/my-app/app/admin/transactions/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,19611)),"/home/beane/projects/my-app/my-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/home/beane/projects/my-app/my-app/app/admin/transactions/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/transactions/page",pathname:"/admin/transactions",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},87254:(e,t,s)=>{Promise.resolve().then(s.bind(s,22323)),Promise.resolve().then(s.bind(s,5986)),Promise.resolve().then(s.bind(s,37225))},10814:(e,t,s)=>{Promise.resolve().then(s.bind(s,72119)),Promise.resolve().then(s.bind(s,73654)),Promise.resolve().then(s.bind(s,78637))},78637:(e,t,s)=>{"use strict";s.d(t,{AdminTransactionList:()=>v});var r=s(45512),a=s(58009),n=s(28531),i=s.n(n),o=s(87021),l=s(97643),d=s(29637),c=s(54871),u=s(25409),m=s(59462),p=s(22096),f=s(91124),x=s(16873),h=s(21956);function v({transactions:e}){let[t,s]=(0,a.useState)("all"),[n,v]=(0,a.useState)(""),g=(0,a.useMemo)(()=>{let s=e;if("all"!==t&&(s=s.filter(e=>e.status===t)),n){let e=n.toLowerCase();s=s.filter(t=>t.customerName.toLowerCase().includes(e)||t.customerPhone.toLowerCase().includes(e)||t.package.name.toLowerCase().includes(e)||t.reseller.name.toLowerCase().includes(e))}return s},[e,t,n]),b=e=>{switch(e){case"ACTIVE":return(0,r.jsx)(c.E,{variant:"default",children:"Aktif"});case"COMPLETED":return(0,r.jsx)(c.E,{variant:"success",children:"Selesai"});case"CANCELLED":return(0,r.jsx)(c.E,{variant:"destructive",children:"Dibatalkan"});default:return(0,r.jsx)(c.E,{variant:"outline",children:e})}},j=e=>{let t=e.filter(e=>"PENDING"===e.status),s=e.filter(e=>"APPROVED"===e.status),r=e.filter(e=>"REJECTED"===e.status);return{pendingCount:t.length,approvedCount:s.length,rejectedCount:r.length,totalCount:e.length}};return 0===e.length?(0,r.jsx)(l.Zp,{children:(0,r.jsxs)(l.Wu,{className:"flex flex-col items-center justify-center p-6",children:[(0,r.jsx)(f.A,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,r.jsx)("p",{className:"text-lg font-medium text-center",children:"Belum ada transaksi"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground text-center mt-1",children:"Transaksi akan muncul setelah reseller membuat transaksi"})]})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,r.jsxs)("div",{className:"relative w-full md:w-64",children:[(0,r.jsx)(x.A,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,r.jsx)(u.p,{type:"search",placeholder:"Cari transaksi...",className:"pl-8",value:n,onChange:e=>v(e.target.value)})]}),(0,r.jsx)(d.tU,{defaultValue:"all",value:t,onValueChange:s,className:"w-full md:w-auto",children:(0,r.jsxs)(d.j7,{className:"grid w-full grid-cols-3",children:[(0,r.jsx)(d.Xi,{value:"all",children:"Semua"}),(0,r.jsx)(d.Xi,{value:"ACTIVE",children:"Aktif"}),(0,r.jsx)(d.Xi,{value:"COMPLETED",children:"Selesai"})]})})]}),0===g.length?(0,r.jsx)(l.Zp,{children:(0,r.jsxs)(l.Wu,{className:"flex flex-col items-center justify-center p-6",children:[(0,r.jsx)(x.A,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,r.jsx)("p",{className:"text-lg font-medium text-center",children:"Tidak ada transaksi"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground text-center mt-1",children:"Tidak ada transaksi yang sesuai dengan filter"})]})}):(0,r.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:g.map(e=>{let t=j(e.payments);return(0,r.jsxs)(l.Zp,{children:[(0,r.jsxs)(l.aR,{className:"pb-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(p.c,{icon:e.package.packageType.icon,className:"h-5 w-5"}),(0,r.jsx)(l.ZB,{className:"text-lg",children:e.package.name})]}),b(e.status)]}),(0,r.jsxs)(l.BT,{className:"mt-2",children:["Pelanggan: ",e.customerName]})]}),(0,r.jsx)(l.Wu,{className:"pb-3",children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Reseller:"}),(0,r.jsx)("span",{className:"font-medium",children:e.reseller.name})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Tanggal Transaksi:"}),(0,r.jsx)("span",{className:"font-medium",children:(0,m.Yq)(e.createdAt)})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Total:"}),(0,r.jsx)("span",{className:"font-medium",children:(0,m.vv)(e.totalAmount)})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Tenor:"}),(0,r.jsxs)("span",{className:"font-medium",children:[e.tenorMonths," bulan"]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Status Pembayaran:"}),(0,r.jsxs)("span",{className:"font-medium",children:[t.approvedCount,"/",t.totalCount," cicilan"]})]})]})}),(0,r.jsx)("div",{className:"px-6 pb-6",children:(0,r.jsx)(i(),{href:`/admin/transactions/${e.id}`,children:(0,r.jsxs)(o.$,{variant:"outline",className:"w-full",children:[(0,r.jsx)(h.A,{className:"mr-2 h-4 w-4"}),"Lihat Detail"]})})})]},e.id)})})]})}},22096:(e,t,s)=>{"use strict";s.d(t,{c:()=>o});var r=s(45512),a=s(21957),n=s(10985),i=s(59462);function o({icon:e,className:t,...s}){let o=a[e]||n.A;return(0,r.jsx)(o,{className:(0,i.cn)("h-4 w-4",t),...s})}},54871:(e,t,s)=>{"use strict";s.d(t,{E:()=>o});var r=s(45512);s(58009);var a=s(21643),n=s(59462);let i=(0,a.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o({className:e,variant:t,...s}){return(0,r.jsx)("div",{className:(0,n.cn)(i({variant:t}),e),...s})}},25409:(e,t,s)=>{"use strict";s.d(t,{p:()=>i});var r=s(45512),a=s(58009),n=s(59462);let i=a.forwardRef(({className:e,type:t,...s},a)=>(0,r.jsx)("input",{type:t,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,...s}));i.displayName="Input"},29637:(e,t,s)=>{"use strict";s.d(t,{tU:()=>E,av:()=>R,j7:()=>q,Xi:()=>L});var r=s(45512),a=s(58009),n=s(31412),i=s(6004),o=s(48305),l=s(98060),d=s(30830),c=s(59018),u=s(13024),m=s(30096),p="Tabs",[f,x]=(0,i.A)(p,[o.RG]),h=(0,o.RG)(),[v,g]=f(p),b=a.forwardRef((e,t)=>{let{__scopeTabs:s,value:a,onValueChange:n,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:p="automatic",...f}=e,x=(0,c.jH)(l),[h,g]=(0,u.i)({prop:a,onChange:n,defaultProp:i});return(0,r.jsx)(v,{scope:s,baseId:(0,m.B)(),value:h,onValueChange:g,orientation:o,dir:x,activationMode:p,children:(0,r.jsx)(d.sG.div,{dir:x,"data-orientation":o,...f,ref:t})})});b.displayName=p;var j="TabsList",y=a.forwardRef((e,t)=>{let{__scopeTabs:s,loop:a=!0,...n}=e,i=g(j,s),l=h(s);return(0,r.jsx)(o.bL,{asChild:!0,...l,orientation:i.orientation,dir:i.dir,loop:a,children:(0,r.jsx)(d.sG.div,{role:"tablist","aria-orientation":i.orientation,...n,ref:t})})});y.displayName=j;var N="TabsTrigger",w=a.forwardRef((e,t)=>{let{__scopeTabs:s,value:a,disabled:i=!1,...l}=e,c=g(N,s),u=h(s),m=P(c.baseId,a),p=A(c.baseId,a),f=a===c.value;return(0,r.jsx)(o.q7,{asChild:!0,...u,focusable:!i,active:f,children:(0,r.jsx)(d.sG.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":p,"data-state":f?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:m,...l,ref:t,onMouseDown:(0,n.m)(e.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():c.onValueChange(a)}),onKeyDown:(0,n.m)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&c.onValueChange(a)}),onFocus:(0,n.m)(e.onFocus,()=>{let e="manual"!==c.activationMode;f||i||!e||c.onValueChange(a)})})})});w.displayName=N;var C="TabsContent",k=a.forwardRef((e,t)=>{let{__scopeTabs:s,value:n,forceMount:i,children:o,...c}=e,u=g(C,s),m=P(u.baseId,n),p=A(u.baseId,n),f=n===u.value,x=a.useRef(f);return a.useEffect(()=>{let e=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,r.jsx)(l.C,{present:i||f,children:({present:s})=>(0,r.jsx)(d.sG.div,{"data-state":f?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":m,hidden:!s,id:p,tabIndex:0,...c,ref:t,style:{...e.style,animationDuration:x.current?"0s":void 0},children:s&&o})})});function P(e,t){return`${e}-trigger-${t}`}function A(e,t){return`${e}-content-${t}`}k.displayName=C;var T=s(59462);let E=b,q=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(y,{ref:s,className:(0,T.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",e),...t}));q.displayName=y.displayName;let L=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(w,{ref:s,className:(0,T.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",e),...t}));L.displayName=w.displayName;let R=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(k,{ref:s,className:(0,T.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));R.displayName=k.displayName},86146:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(62740),a=s(51825),n=s(31831),i=s(45369),o=s(62545),l=s(9742),d=s(37225);async function c(){let e=await (0,a.getServerSession)(i.N);e&&"ADMIN"===e.user.role||(0,n.redirect)("/");let t=await o.db.transaction.findMany({include:{package:{include:{packageType:!0}},reseller:{select:{id:!0,name:!0,email:!0}},payments:{orderBy:{dueDate:"asc"}}},orderBy:{createdAt:"desc"}});return(0,r.jsx)(l.U,{children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Manajemen Transaksi"}),(0,r.jsx)(d.AdminTransactionList,{transactions:t})]})})}},37225:(e,t,s)=>{"use strict";s.d(t,{AdminTransactionList:()=>r});let r=(0,s(46760).registerClientReference)(function(){throw Error("Attempted to call AdminTransactionList() from the server but AdminTransactionList is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/beane/projects/my-app/my-app/components/admin/admin-transaction-list.tsx","AdminTransactionList")}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[638,8728,3618,7928,159,1957,4999,4563],()=>s(83061));module.exports=r})();